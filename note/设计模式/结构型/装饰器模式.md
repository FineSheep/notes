# è£…é¥°å™¨æ¨¡å¼

## å¼•å…¥

â€‹		å‡è®¾æœ‰ä¸€å—ğŸ‚ï¼Œå¦‚æœæ¶‚ä¸Šå¥¶æ²¹ï¼Œå°±æ˜¯å¥¶æ²¹è›‹ç³•ã€‚å¦‚æœåŠ ä¸ŠğŸ“ï¼Œå°±æ˜¯è‰è“å¥¶æ²¹è›‹ç³•ã€‚å¦‚æœåŠ ä¸ŠğŸ«ï¼Œèœ¡çƒ›ï¼Œå°±å˜æˆäº†ä¸€å—ç”Ÿæ—¥è›‹ç³•ã€‚

â€‹		ä¸è®ºæ—¶è›‹ç³•ï¼Œå¥¶æ²¹è›‹ç³•ï¼Œè‰è“å¥¶æ²¹è›‹ç³•è¿˜æ˜¯ç”Ÿæ—¥è›‹ç³•ï¼Œä»–ä»¬çš„æ ¸å¿ƒéƒ½æ˜¯è›‹ç³•ã€‚

â€‹		é¦–å…ˆæœ‰ä¸€ä¸ªç›¸å½“äºè›‹ç³•çš„å¯¹è±¡ï¼Œç„¶åä¸æ–­çš„è£…é¥°å½“é«˜ä¸€æ ·çš„ä¸æ–­å¯¹å…¶å¢åŠ åŠŸèƒ½ï¼Œä»–å°±å˜æˆäº†ä½¿ç”¨æ›´åŠ æ˜ç¡®çš„å¯¹è±¡ã€‚

â€‹		åƒè¿™æ ·ä¸æ–­çš„ä¸ºdui'xduiåƒæ·»åŠ åŠŸèƒ½çš„è®¾è®¡æ¨¡å¼ç§°ä¸º**Decoratoræ¨¡å¼ã€‚**DecoratoræŒ‡çš„æ˜¯â€œè£…é¥°ç‰©â€ã€‚

## äº‹ä¾‹ç¨‹åº

### ç±»çš„ä¸€è§ˆè¡¨

| åå­—          | è¯´æ˜                     |
| ------------- | ------------------------ |
| Display       | ç”¨äºæ˜¾ç¤ºå­—ç¬¦ä¸²çš„æŠ½è±¡ç±»   |
| StringDisplay | ç”¨äºæ˜¾ç¤ºå•è¡Œå­—ç¬¦çš„ç±»     |
| Border        | ç”¨äºæ˜¾ç¤ºè£…é¥°è¾¹æ¡†çš„æŠ½è±¡ç±» |
| SideBorder    | ç”¨äºåªæ˜¾ç¤ºå³è¾¹æ¡†çš„ç±»     |
| FullBorder    | ç”¨äºæ˜¾ç¤ºä¸Šä¸‹å·¦å³è¾¹æ¡†çš„ç±» |
| Main          | æµ‹è¯•                     |

### ç±»å›¾

![image-20221217193258770](D:/notes/3150/image-20221217193258770.png)

### ç›¸å…³ç±»

> Displayç±»

- æŠ½è±¡ç±»ï¼Œæ˜¾ç¤ºå¤šè¡Œå­—ç¬¦ä¸²
- getColumns()ï¼ŒæŠ½è±¡æ–¹æ³•ï¼Œè·å–æ¨ªå‘å­—ç¬¦æ•°
- getRows();æŠ½è±¡æ–¹æ³•ï¼Œè·å–çºµå‘è¡Œæ•°
- getRowText(int row);æŠ½è±¡æ–¹æ³•ï¼Œè·å–ç¬¬rowè¡Œçš„å­—ç¬¦ä¸²
- show() æ˜¯æ˜¾ç¤ºæ‰€æœ‰è¡Œçš„å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œè°ƒç”¨getRows()è·å–è¡Œæ•°ï¼Œè°ƒç”¨getRowText(int row)è·å–éœ€è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ã€‚showæ–¹æ³•ä½¿ç”¨äº†getRowså’ŒgetRowTextç­‰æŠ½è±¡æ–¹æ³•ï¼Œè¿™å±äº**æ¨¡æ¿æ¨¡å¼ã€‚**

```java
public abstract class Display {
    public abstract int getColumns();//è·å–æ¨ªå‘å­—ç¬¦æ•°

    public abstract int getRows();//è·å–çºµå‘è¡Œæ•°

    public abstract String getRowText(int row); //è·å–ç¬¬rowè¡Œçš„å­—ç¬¦ä¸²

    public final void show() {
        //å…¨éƒ¨å±•ç¤º
        for (int i = 0; i < getRows(); i++) {
            System.out.println(getRowText(i));
        }
    }
}
```

> StringDisplayç±»

- ç”¨äºæ˜¾ç¤ºå•è¡Œå­—ç¬¦ä¸²çš„ç±»ã€‚æ˜¯Displayç±»çš„å­ç±»ï¼Œå®ç°displayçš„æŠ½è±¡æ–¹æ³•ã€‚
- stringä¿å­˜è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ã€‚StringDisplayåªæ˜¾ç¤ºä¸€è¡Œå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥getColumnsè¿”å›string.getBytes().lengthï¼ŒgetRowsè¿”å›å›ºå®šå€¼1ã€‚
- å½“è·å–ç¬¬0è¡Œçš„æ—¶å€™getRowTextæ‰è¿”å›stringå­—æ®µã€‚
- StringDisplayç›¸å½“äºç”Ÿæ—¥è›‹ç³•ä¸­çš„æ ¸å¿ƒğŸ‚ã€‚

```java
public class StringDisplay extends Display {
    private String string;   //è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²

    public StringDisplay(String string) {       //ä¼ å…¥è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²
        this.string = string;
    }

    @Override
    public int getColumns() {       //å­—ç¬¦æ•°
        return string.getBytes().length;
    }

    @Override
    public int getRows() { //è¡Œæ•°æ˜¯1
        return 1;
    }

    @Override
    public String getRowText(int row) {   //å½“rowä¸º0è¿”å›
        if (row == 0) {
            return string;
        } else {
            return null;
        }
    }
}
```

>Borderç±»

- è£…é¥°è¾¹æ¡†çš„æŠ½è±¡ç±»ï¼ŒDisplayçš„å­ç±»
- é€šè¿‡ç»§æ‰¿ï¼Œ**è£…é¥°è¾¹æ¡†ä¸è¢«è£…é¥°ç‰©æœ‰äº†ç›¸åŒçš„æ–¹æ³•**ï¼Œå…·æœ‰äº†ä¸€è‡´æ€§
- Displayç±»å‹çš„displayå­—æ®µï¼Œè¡¨ç¤ºè¢«è£…é¥°ç‰©ã€‚ä¸è¿‡displayå¹¶ä¸ä»…é™äºStringDisplayçš„å®ä¾‹ï¼Œå› ä¸ºBorderä¹Ÿæ˜¯Displayçš„å­ç±»ï¼Œdisplayå¯èƒ½æ˜¯å…¶ä»–è£…é¥°è¾¹æ¡†ã€‚

```java
public abstract class Border extends Display {

    protected Display display;//è¡¨ç¤ºè¢«è£…é¥°ç‰©

    public Border(Display display) {    //åœ¨ç”Ÿæˆå®ä¾‹æ—¶é€šè¿‡å‚æ•°æŒ‡å®šè¢«è£…é¥°ç‰©
        this.display = display;
    }
}
```

> SideBorderç±»

- åœ¨å­—ç¬¦ä¸²ä¸¤ä¾§è£…é¥°è¾¹æ¡†

æ•ˆæœï¼š

|è¢«è£…é¥°ç‰©|

```java
public class SideBorder extends Border {
    private char borderChar;

    public SideBorder(Display display, char borderChar) {
        super(display);
        this.borderChar = borderChar;
    }

    @Override
    public int getColumns() {

        return 1 + display.getColumns() + 1;
    }

    @Override
    public int getRows() {
        return display.getRows();
    }

    @Override
    public String getRowText(int row) {
        return borderChar + display.getRowText(row) + borderChar;
    }
}
```

> FullBorderç±»

- åœ¨å­—ç¬¦ä¸²çš„ä¸Šä¸‹å·¦å³éƒ½åŠ ä¸Šè£…é¥°è¾¹æ¡†

```java
public class FullBorder extends Border {
    public FullBorder(Display display) {
        super(display);
    }

    @Override
    public int getColumns() {

        return 1 + display.getColumns() + 1;
    }

    @Override
    public int getRows() {

        return 1 + display.getRows() + 1;
    }

    @Override
    public String getRowText(int row) {
        if (row == 0) {
            return "+" + makeLine('-', display.getColumns()) + "+";
        } else if (row == display.getRows() + 1) {
            return "+" + makeLine('-', display.getColumns()) + "+";

        } else {
            return "|" + display.getRowText(row - 1) + "|";
        }
    }

    private String makeLine(char ch, int count) {
        StringBuffer buf = new StringBuffer();
        for (int i = 0; i < count; i++) {
            buf.append(ch);
        }
        return buf.toString();
    }
}
```

> Main

- b1ï¼Œæ˜¾ç¤ºhello world
- b2ï¼Œb1çš„ä¸¤ä¾§åŠ ä¸Šâ€˜#â€™
- b3ï¼Œb2ä¸Šä¸‹å·¦å³åŠ ä¸Šè£…é¥°è¾¹æ¡†
- b4ï¼Œç»™hello worldåŠ ä¸Šå¤šé‡è¾¹æ¡†

```java
public class Main {
    public static void main(String[] args) {


        Display b1 = new StringDisplay("hello world");
        b1.show();
        Display b2 = new SideBorder(b1, '#');
        b2.show();
        Display b3 = new FullBorder(b1);
        b3.show();
        Display b4 = new SideBorder(
                new FullBorder(
                        new FullBorder(
                                new SideBorder(
                                        new FullBorder(
                                                new StringDisplay("hello world")
                                        ),
                                        '*'
                                )
                        )
                )
                , '/');

        b4.show();
    }
}
```

æ•ˆæœï¼š

```
hello world
#hello world#
+-----------+
|hello world|
+-----------+
/+-----------------+/
/|+---------------+|/
/||*+-----------+*||/
/||*|hello world|*||/
/||*+-----------+*||/
/|+---------------+|/
/+-----------------+/
```

### ç™»åœºè§’è‰²

- Component

  å¢åŠ åŠŸèƒ½çš„æ ¸å¿ƒè§’è‰²ï¼Œå®šä¹‰è›‹ç³•çš„æ¥å£ã€‚â€”â€”Display

- ConcreteComponent

  å…·ä½“çš„è›‹ç³•ã€‚â€”â€”StringDisplay

- Decorator

  ä¸Componentå…·æœ‰ç›¸åŒçš„æ¥å£ï¼Œåœ¨å†…éƒ¨ä¿å­˜äº†è¢«è£…é¥°çš„å¯¹è±¡ã€‚â€”â€”Border

- ConcreteDecorator

  å…·ä½“çš„è£…é¥°è§’è‰²ã€‚â€”â€”SideBorderå’ŒFullBorder